# 5. Metal 标准库

本章节介绍Metal标准支持的函数。

## 5.1 命名空间与头文件

## 5.2 通用函数

| 内置通用函数 | 描述 |
| -- | -- |
| T clamp(T x, T minval, T maxval) | |
| T mix(T x, T y, T a) | |
| T saturate(T x) | |
| T sign(T x) | 如果 x>0, 返回1.0；如果 x= -0.0，返回-0.0；如果 x= +0.0，返回 +0.0；如果 x<0，返回-1.0. |
| T smoothstep(T edge0, T edge1, T
x) | |
| T step(T edge, T x) | |


## 5.3

## 5.4 关系型函数

## 5.5 数学函数


## 5.10


### 5.10.9 2D深度纹理

如下的数据类型以及对应的构造函数可以用来指定多样的采样选项：

```metal
bias(float value)
level(float lod)
gradient2d(float2 dPdx, float2 dPdy)
```

如下的成员函数可以用来对2D深度纹理进行采样。

```metal
T sample(sampler s, float2 coord, int2 offset = int2(0)) const
T sample(sampler s, float2 coord, lod_options options, int2 offset =
int2(0)) const 
```

`lod_options`必须是 `bias`、`level` 或者 `gradient2d`中的一种类型。

如下的成员函数可以用来对2D深度纹理进行采样，以及和单维组进行数值比较。

```metal
T sample_compare(sampler s, float2 coord, float compare_value, int2 offset
= int2(0)) const
T sample_compare(sampler s, float2 coord, float compare_value, lod_options
options, int2 offset = int2(0)) const 
```

`lod_options`必须是 `bias`、`level` 或者 `gradient2d`中的一种类型。`T`必须是`float`类型。

`sample_compare`


### 5.10.10 2D深度纹理数组

```metal
T sample(sampler s, float2 coord, uint array, int2 offset = int2(0)) const
T sample(sampler s, float2 coord, uint array, lod_options options, int2
offset = int2(0)) const 
```

`lod_options`必须是 `bias`、`level` 或者 `gradient2d`中的一种类型。


### 5.10.11 立方深度纹理(Cube Depth Texture)

```metal
bias(float value)
level(float lod)
gradientcube(float3 dPdx, float3 dPdy)
```

如下的成员函数可以用来对立方深度纹理进行采样。

```metal
T sample(sampler s, float3 coord) const
T sample(sampler s, float3 coord, lod_options options) const 
```

`load_options` 必须是 `bias`、`level` 或者 `gradientcube`中的一种类型。


如下的

```metal
T sample_compare(sampler s, float3 coord, float compare_value) const
T sample_compare(sampler s, float3 coord, float compare_value, lod_options
options) const
```

`load_options` 必须是 `bias`、`level` 或者 `gradientcube`中的一种类型。`T`必须是`float`。


```metal
T read(uint2 coord, uint face, uint lod = 0) const
T read(ushort2 coord, ushort face, ushort lod = 0) const
```